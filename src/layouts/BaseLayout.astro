---
import '../styles/global.css';
import Navbar from '../components/Navbar.astro';
import Sidebar from '../components/Sidebar.astro';

interface Props {
  title?: string;
  description?: string;
}

const { title = 'Documentation', description = 'Markdown-driven documentation engine' } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Preconnect to font providers -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />

    <title>{title}</title>

    <!-- Prevent flash of unstyled content for dark mode -->
    <script is:inline>
      (function() {
        const stored = localStorage.getItem('theme');
        if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>

    <slot name="head" />
  </head>

  <body class="min-h-screen bg-white dark:bg-docs-bg-dark text-docs-text dark:text-docs-text-dark font-sans antialiased transition-colors duration-200">
    <div class="flex flex-col min-h-screen">
      <Navbar />

      <div class="flex flex-1">
        <!-- Left Sidebar - Navigation -->
        <aside class="hidden lg:block w-64 xl:w-72 shrink-0 border-r border-docs-border dark:border-docs-border-dark bg-docs-sidebar dark:bg-docs-sidebar-dark" style="font-size: 1.02em;">
          <div class="sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto p-4 xl:p-6">
            <Sidebar />
          </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 min-w-0">
          <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
            <slot />
          </div>
        </main>

        <!-- Right Sidebar - Table of Contents -->
        <aside class="hidden xl:block w-56 2xl:w-64 shrink-0 border-l border-docs-border dark:border-docs-border-dark bg-docs-sidebar dark:bg-docs-sidebar-dark" style="font-size: 1.02em;">
          <div class="sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto p-4 xl:p-6">
            <slot name="toc" />
          </div>
        </aside>
      </div>
    </div>
  </body>
</html>
